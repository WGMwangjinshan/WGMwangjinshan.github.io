(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{486:function(s,e,a){s.exports=a.p+"assets/img/1.9129d6a0.png"},502:function(s,e,a){"use strict";a.r(e);var n=a(4),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("在vue中，除了内部自带的指令（如v-model、v-show、v-on等），vue也可以自己定义自定义指令来满足程序编写过程中的需求。")]),s._v(" "),n("h2",{attrs:{id:"定义全局的指令来进行自定义的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定义全局的指令来进行自定义的使用"}},[s._v("#")]),s._v(" 定义全局的指令来进行自定义的使用")]),s._v(" "),n("p",[s._v("使用 Vue.directive(id, [definition]) 定义全局的指令来进行自定义指令。")]),s._v(" "),n("blockquote",[n("p",[s._v("这里面id参数是这个自定义指令的名称，注意，在定义的时候，指令的名称前面，不需要加 v-前缀，但是： 在调用的时候，必须在置顶的名称前加上 v-前缀来进行调用。")])]),s._v(" "),n("blockquote",[n("p",[s._v("[definition]是一个对象，这个对象身上有一些指令相关的函数，这些函数可以在特定阶段，来执行相关的操作。")])]),s._v(" "),n("h3",{attrs:{id:"如何定义："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何定义："}},[s._v("#")]),s._v(" 如何定义：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('Vue.directive("focus", {\n            // 注意：在每个函数中， 第一个参数永远是el， 表示被绑定了指令的那个元素，这个el参数，是一个原生的JS对象\n            bind: function(el){ // 每当指令绑定到元素上的时候，会立即执行这个bind函数，只执行一次\n\n            },\n            inserted: function(el){ // inserted 表示元素插入到DOM中的时候，会执行inserted函数【触发一次】\n                el.focus()\n            },\n            updated: function(el) { // 当VNode更新的时候，会执行updated，可能会触发多次\n                \n            },\n        })\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h3",{attrs:{id:"如何调用："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#如何调用："}},[s._v("#")]),s._v(" 如何调用：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('\x3c!-- 注意： Vue中所有的指令，在调用的时候，都以 v- 开头 --\x3e\n                    <input type="text" class="form-control" v-model="keywords" v-focus>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"钩子函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#钩子函数"}},[s._v("#")]),s._v(" 钩子函数")]),s._v(" "),n("p",[s._v("在对象参数中，有几个可以使用的钩子函数，和vue生命周期的钩子函数一样，每个钩子函数都会在特定的时间发挥自己的作用。")]),s._v(" "),n("p",[n("strong",[s._v("一个指令定义对象可以提供如下几个钩子函数 (均为可选)：")])]),s._v(" "),n("ul",[n("li",[s._v("bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。")])]),s._v(" "),n("blockquote",[n("p",[s._v("unbind：只调用一次，指令与元素解绑时调用。")])]),s._v(" "),n("ul",[n("li",[s._v("inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。")]),s._v(" "),n("li",[s._v("update：所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)。")])]),s._v(" "),n("blockquote",[n("p",[s._v("componentUpdated：指令所在组件的 VNode 及其子 VNode 全部更新后调用。")])]),s._v(" "),n("h2",{attrs:{id:"钩子函数的参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#钩子函数的参数"}},[s._v("#")]),s._v(" 钩子函数的参数")]),s._v(" "),n("p",[s._v("在使用钩子函数的时候我们会对钩子函数进行传参，以支持函数中正常的逻辑关系。")]),s._v(" "),n("ul",[n("li",[s._v("el：指令所绑定的元素，可以用来直接操作 DOM。")]),s._v(" "),n("li",[s._v("binding：一个对象，包含以下 property：\n"),n("ul",[n("li",[s._v("name：指令名，不包括 v- 前缀。")]),s._v(" "),n("li",[s._v('value：指令的绑定值，例如：v-my-directive="1 + 1" 中，绑定值为 2。')]),s._v(" "),n("li",[s._v("oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。")]),s._v(" "),n("li",[s._v('expression：字符串形式的指令表达式。例如 v-my-directive="1 + 1" 中，表达式为 "1 + 1"。')]),s._v(" "),n("li",[s._v('arg：传给指令的参数，可选。例如 v-my-directive:foo 中，参数为 "foo"。')]),s._v(" "),n("li",[s._v("modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar 中，修饰符对象为 { foo: true, bar: true }。")])])]),s._v(" "),n("li",[s._v("vnode：Vue 编译生成的虚拟节点。（还有很多的API，若是使用的话自作查询，本文不多说）")]),s._v(" "),n("li",[s._v("oldVnode：上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。")])]),s._v(" "),n("div",{staticClass:"custom-block danger"},[n("p",[s._v("官方说这些参数除了el之外，其他参数都应该是只读，不要修改！！！！！。如果需要钩子之间共享数据，建议通过元素的dataset来进行。")]),s._v(" "),n("p",[s._v("要问dataset是啥？举个例子：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<div id=\"user\" data-id=\"1234567890\" data-user=\"johndoe\" data-date-of-birth>John Doe\n</div>\n\nvar el = document.querySelector('#user');\n\n// el.id == 'user'\n// el.dataset.id === '1234567890'\n// el.dataset.user === 'johndoe'\n// el.dataset.dateOfBirth === ''\n\nel.dataset.dateOfBirth = '1960-10-03'; // set the DOB.\n\n// 'someDataAttr' in el.dataset === false\n\nel.dataset.someDataAttr = 'mydata';\n// 'someDataAttr' in el.dataset === true\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])])]),s._v(" "),n("p",[n("strong",[s._v("这里官方给出了个例子，自行感受：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("//HTML\n<div id=\"hook-arguments-example\" v-demo:foo.a.b=\"message\"></div>\n\n//JS\nVue.directive('demo', {\n  bind: function (el, binding, vnode) {\n    var s = JSON.stringify\n    el.innerHTML =\n      'name: '       + s(binding.name) + '<br>' +\n      'value: '      + s(binding.value) + '<br>' +\n      'expression: ' + s(binding.expression) + '<br>' +\n      'argument: '   + s(binding.arg) + '<br>' +\n      'modifiers: '  + s(binding.modifiers) + '<br>' +\n      'vnode keys: ' + Object.keys(vnode).join(', ')\n  }\n})\n\nnew Vue({\n  el: '#hook-arguments-example',\n  data: {\n    message: 'hello!'\n  }\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[s._v("结果：\n"),n("img",{attrs:{src:a(486),alt:"image"}})]),s._v(" "),n("h2",{attrs:{id:"动态指令参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#动态指令参数"}},[s._v("#")]),s._v(" 动态指令参数")]),s._v(" "),n("p",[s._v('在 v-mydirective:[argument]="value" 中，argument 参数可以根据组件实例数据进行更新！这使得自定义指令可以在应用中被灵活使用。')]),s._v(" "),n("h2",{attrs:{id:"对象字面量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对象字面量"}},[s._v("#")]),s._v(" 对象字面量")]),s._v(" "),n("p",[s._v("如果指令需要多个值，可以传入一个 JavaScript 对象字面量。记住，指令函数能够接受所有合法的 JavaScript 表达式。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<div v-demo=\"{ color: 'white', text: 'hello!' }\"></div>\n\nVue.directive('demo', function (el, binding) {\n  console.log(binding.value.color) // => \"white\"\n  console.log(binding.value.text)  // => \"hello!\"\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"自我理解和总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自我理解和总结"}},[s._v("#")]),s._v(" 自我理解和总结")]),s._v(" "),n("p",[s._v("不管怎么样，自定义指令都是在操作DOM，而不是操作的虚拟DOM，过度的使用可能会导致性能的底下，同时")])])}),[],!1,null,null,null);e.default=t.exports}}]);